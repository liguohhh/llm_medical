这是一个医疗辅助问答系统
系统由vue组成的前端，springboot组成的业务层，python fastapi组成的llm层组成
最终想要实现的功能有
病人注册登录，医生登录（不用注册，由管理员负责添加账户），管理员登录（管理员账号内置数据库中）
病人界面可以浏览所有智能体，选择智能体与其沟通病情，智能体最终开具处方，结束与病人交流
病人可以浏览自己的历史对话，并选择与其继续对话（未开具处方的）或查看处方状态（审核是否通过）
医生界面可以查看自己所属医疗方向的最终处方，对处方进行修改，选择审核通过或不通过
管理员界面可以管理所有用户信息，删除，新增，修改用户的具体属性
springboot层负责处理用户/医生/管理员的注册登录，与前端交互，数据库存储信息，向llm层发送指定的请求并转发到前端
帮我设计一套springboot系统，首先实现数据库设计，并给出一个设计温度，具体设计如下
1.数据库（关联内容使用外键）
系统连接mysql数据库
系统需要存储不同的医疗方向
（1）医疗方向包含，uid，医疗方向（内科，外科等），具体描述
系统需要存储用户/管理员/医生的信息（三个用户可以共用一张表）
（1）用户（病人）信息有，姓名，性别，年龄，账户，密码
（2）医生信息有，姓名，性别，年龄，医疗方向（指向医疗方向表），账户，密码
（3）管理员信息有，账户名，账户，密码
系统需要存储网站创建的智能体信息
（1）智能体信息包含，智能体名称，医疗方向（指向医疗方向表），对接的大模型的模型名，对接的大模型的链接地址，对接的大模型的apikey，使用的模板（template_id），模板的描述（description），模板的parameters（n个），使用的向量数据库的命名空间（n个命名空间），使用的精确查找数据库的name，uid（n个精确查找数据库）
系统需要存储每个病人与智能体的对话信息
（对话信息包含）本次对话的uid，病人的账户，使用的智能体，大模型的对话内容，对话是否结束（以是否开具处方为标准），如果开具处方则提供指向处方的外键
系统需要存储智能体最终为病人开具的诊断处方
（1）处方信息包含，病人账户，使用的智能体，医疗方向（指向医疗方向表），智能体最终开的处方内容，医生是否审核通过（未审核，审核通过，审核不通过），审核医生账户（指向医生的信息），医生审核通过/不通过原因

现在你已经实现登录注册功能（包含使用security进行的认证和权限控制），接下来需要实现具体的业务逻辑，并给出相应接口（注意权限控制），包括以下功能：
1.病人
（1）病人可以获取所有智能体的名称，医疗方向
（2）病人可以选择智能体与其进行对话，此时要新建对话
（3）病人可以查看自己的历史对话，并选择与其继续对话（未开具处方的）或查看处方状态（处方具体内容，审核是否通过，审核医生，具体内容等）
（4）病人在对话中，可以点击开具处方，结束对话并开具具体的处方内容（此项暂时留空，后续为转发到python fastapi端实现）
（4）病人在进入对话后（新建或继续历史对话），可以对该智能体发送具体的对话内容，并等待智能体回复（此项暂时留空，后续为转发到python fastapi端实现）
2.医生
（1）医生可以查看自己所属医疗方向的最终处方，对单个处方进行修改，选择审核通过或不通过，并填写审核具体内容
（2）医生可以查看该处方对应的病人信息，以及病人与智能体的对话信息
3.管理员
（1）管理员可以查看所有用户信息，删除，新增，修改用户的具体属性
（2）管理员可以查看所有智能体的信息，删除，新增，修改智能体的具体属性
（3）管理员可以查看所有的提示词模板，删除，新增，修改模板（为转发到python fastapi端实现）
（4）管理员可以管理向量数据库，新建库，为库中上传文件（txt，pdf，docx等），删除上传的文件，删除库（为转发到python fastapi端实现）
（5）管理员可以管理精确查找数据库（为转发到python fastapi端实现）

聊天的逻辑如下
病人选择创建或继续对话（已实现）
进入一个聊天界面（前端的chatview）
在对话中，病人输入聊天内容
前端将消息发送到后端（参考chat_router.md文档）
消息内容包括：病人使用的智能体，消息内容，向量数据库的n_results（搜索条数），精准查询数据库的max_results，search_depth，以及两个数据库的rag_history_count（历史消息数量），params的内容（params的内容是动态的，可以从后端接口获取有哪些params，接口文档为prompt.md，其中{question}，{precise_content}，{vector_content}为fastapi系统默认参数，不需要用户手动输入）（{age}，{gender}为从用户信息数据库中获取的参数，如果有剩下的参数需要用户手动输入）
在ui中提供选项调整这些设置
后端接收到消息后，根据传入的参数，同时调取对应智能体的数据库，将接口补全，然后调用fastapi接口，并最后将结果返回给前端
整个过程为流式传输
前端与springboot交互参考api.js，springboot与fastapi交互参考chat_router.md文档
springboot中应该设计在PatientController中实现逻辑